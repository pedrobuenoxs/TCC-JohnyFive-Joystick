<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>My first three.js app</title>
		<style>
			body { margin: 0; }
		</style>
	</head>
	<body>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r99/three.min.js"></script>
    <script src='/socket.io/socket.io.js'></script>

		<script>
      var socket = io();
      let imuX = 0;

      const axesHelper = new THREE.AxesHelper(3);
		
			const scene = new THREE.Scene();
			const camera = new THREE.PerspectiveCamera( 75, window.innerWidth / window.innerHeight, 0.1, 1000 );

			const renderer = new THREE.WebGLRenderer();
			renderer.setSize( window.innerWidth, window.innerHeight );
			document.body.appendChild( renderer.domElement );

			const geometry = new THREE.BoxGeometry( 1, 1, 3 );
			const material = new THREE.MeshBasicMaterial( { color: 0x6667ab } );
			const cube = new THREE.Mesh( geometry, material );
			cube.add( axesHelper );
			scene.add( cube );

			camera.position.z = 5;

      socket.on('imu', function(data) { 
        
        function animate() {
          requestAnimationFrame( animate );
          cube.rotation.x = 0
          cube.rotation.y = (data.imuY/2)*3,14;
          cube.rotation.z = 0;

          renderer.render( scene, camera );
        };
        animate();
      });
	//   socket.on('imu', function(data) { 
	// 	console.log(data);
	// 	imuX = data.imuX
	// 	imuY = data.imuY
	// 	imuZ = data.imuZ
	//   });


		</script>
	</body>
</html>